<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>בית מדרש ספרא</title>
  <link rel="stylesheet" href="../style.css" />
  <style>
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #f2f2f2;
      padding: 10px 20px;
      position: relative;
      z-index: 10;
    }

    nav .logo img {
      height: 40px;
      vertical-align: middle;
    }

    nav .nav-links {
      list-style: none;
      display: flex;
      gap: 20px;
    }

    nav .nav-links li a {
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }

    #date-container {
      background-color: #f8f8f8;
      color: #a06c50;
      font-weight: bold;
      padding: 10px 0;
      text-align: center;
      user-select: none;
      white-space: nowrap;
      font-size: 1.1rem;
      direction: rtl;
      cursor: default;
      pointer-events: none;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo">
      <a href="../index.html">
        <img src="../favicon.png" alt="Logo" />
      </a>
      בית מדרש ספרא
    </div>

    <ul class="nav-links">
      <li><a href="../index.html#about2">אודות</a></li>
      <li><a href="../index.html#community">קהילות</a></li>
      <li><a href="../index.html#history">היסטוריה</a></li>
      <li><a href="../index.html#gallery">תמונות</a></li>
      <li>
        <a href="https://drive.google.com/drive/folders/1VerAkXvv7LTz3SoGuzgo1dNwcm8GGoz2" target="_blank">חומרים</a>
      </li>
      <li><a href="../Pages/Contacts.html">צרו קשר</a></li>
    </ul>
  </nav>

  <div id="date-container">טוען תאריך...</div>

  <script>
    async function loadHebcalDate() {
      const container = document.getElementById('date-container');
      try {
        const today = new Date().toISOString().slice(0,10); // YYYY-MM-DD

        const response = await fetch(`https://www.hebcal.com/converter?cfg=json&date=${today}&g2h=1&strict=1`);
        const data = await response.json();

        // מפה ליום השבוע בעברית
        const hebrewDays = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"];
        const dayHebrew = "יום " + hebrewDays[new Date(today).getDay()];

        // תאריך עברי
        const hebDate = data.hebrew || "תאריך ?";

        // תאריך לועזי
        const gregDate = today.split('-').reverse().join('/'); // DD/MM/YYYY

        // חיפוש פרשת שבוע בתוך events
        let parsha = "אין פרשה";
        if (Array.isArray(data.events)) {
          const parshaEvent = data.events.find(ev => ev.startsWith("Parashat"));
          if (parshaEvent) {
            // מחליף "Parashat Miketz" ל-"מיקץ" בעברית
            // ניתן ליצור מפה של שמות הפרשות בעברית
            const parshaMap = {
              "Bereshit": "בראשית",
              "Noach": "נח",
              "Lech-Lecha": "לך לך",
              "Vayeira": "וירא",
              "Chayei Sara": "חיי שרה",
              "Toldot": "תולדות",
              "Vayetzei": "ויצא",
              "Vayishlach": "וישלח",
              "Vayeshev": "וישב",
              "Miketz": "מקץ",
              "Vayigash": "ויגש",
              "Vayechi": "ויחי",
              "Shemot": "שמות",
              "Vaera": "וארא",
              "Bo": "בא",
              "Beshalach": "בשלח",
              "Yitro": "יתרו",
              "Mishpatim": "משפטים",
              "Terumah": "תרומה",
              "Tetzaveh": "תצוה",
              "Ki Tisa": "כי תשא",
              "Vayakhel": "ויקהל",
              "Pekudei": "פקודי",
              "Vayikra": "ויקרא",
              "Tzav": "צו",
              "Shmini": "שמיני",
              "Tazria": "תזריע",
              "Metzora": "מצורע",
              "Achrei Mot": "אחרי מות",
              "Kedoshim": "קדושים",
              "Emor": "אמור",
              "Behar": "בהר",
              "Bechukotai": "בחקתי",
              "Bamidbar": "במדבר",
              "Nasso": "נשא",
              "Behaalotecha": "בהעלותך",
              "Shlach": "שלח",
              "Korach": "קרח",
              "Chukat": "חוקת",
              "Balak": "בלק",
              "Pinchas": "פינחס",
              "Matot": "מטות",
              "Masei": "מסעי",
              "Devarim": "דברים",
              "Vaetchanan": "ואתחנן",
              "Eikev": "עקב",
              "Reeh": "ראה",
              "Shoftim": "שופטים",
              "Ki Teitzei": "כי תצא",
              "Ki Tavo": "כי תבו",
              "Nitzavim": "נצבים",
              "Vayeilech": "ויאלך",
              "Haazinu": "האזינו",
              "Vezot Haberakhah": "וזאת הברכה"
            };
            const hebParshaName = parshaMap[parshaEvent.replace("Parashat ", "")];
            if (hebParshaName) parsha = hebParshaName;
          }
        }

        container.textContent = `${dayHebrew}, ${hebDate}, ${gregDate}, פרשת ${parsha}`;
      } catch (err) {
        console.error(err);
        container.textContent = "לא ניתן לטעון תאריך";
      }
    }

    window.onload = loadHebcalDate;
  </script>
</body>
</html>
